<!DOCTYPE html>
<html lang="en-us">

  <head>
  
  
  

  <!-- Enable responsiveness on mobile devices-->
  

  <title>
    
      Django新建项目 &middot; DoSun's Blog
    
  </title>

  

  <!-- CSS -->
  <link rel="stylesheet" href="/assets/css/main.css" />
  

  <link rel="shortcut icon" href="/assets/images/icon.ico">

  <!-- RSS -->
  

  
</head>


  <body class="posts">

    <div id="sidebar">
    <div id='cover-author-image' align='center'>
      <img src="http://ows0v592v.bkt.clouddn.com/DoSun.jpg" alt="DoSun">
    </div>
    <header>
      <div class="site-title">
        <a href="/">
          
            <span class="back-arrow icon"><svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
  <path d="M0 0h24v24H0z" fill="none"/>
  <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
</svg></span>
          
          DoSun's Blog
        </a>
      </div>
      <p class="lead">没事写写东西,记点笔记</p>
    </header>
    <nav id="sidebar-nav-links">
    
      <a class="home-link "
          href="/">Home</a>
    
    
  
    
  
    
    


  
    
  

  
    
      <a class="category-link "
          href="/category/DB.html">Database</a>
    
  

  
    
      <a class="category-link "
          href="/category/Django.html">Django</a>
    
  

  
    
      <a class="category-link "
          href="/category/HTTP.html">HTTP</a>
    
  

  
    
  

  
    
  </nav>
  

    <nav id="sidebar-icon-links">
    <a id="github-link"
       class="icon" title="Github Profile" aria-label="Github Profile"
       href="https://github.com/XDfield">
      <svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
<path d="M256,0C114.615,0,0,114.615,0,256s114.615,256,256,256s256-114.615,256-256S397.385,0,256,0z M408.028,408.028
	c-19.76,19.758-42.756,35.266-68.354,46.093c-6.503,2.75-13.106,5.164-19.8,7.246V423c0-20.167-6.917-35-20.75-44.5
	c8.667-0.833,16.625-2,23.875-3.5s14.917-3.667,23-6.5s15.333-6.208,21.75-10.125s12.583-9,18.5-15.25s10.875-13.333,14.875-21.25
	s7.167-17.417,9.5-28.5s3.5-23.292,3.5-36.625c0-25.833-8.417-47.833-25.25-66c7.667-20,6.833-41.75-2.5-65.25l-6.25-0.75
	c-4.333-0.5-12.125,1.333-23.375,5.5s-23.875,11-37.875,20.5c-19.833-5.5-40.417-8.25-61.75-8.25c-21.5,0-42,2.75-61.5,8.25
	c-8.833-6-17.208-10.958-25.125-14.875s-14.25-6.583-19-8s-9.167-2.292-13.25-2.625s-6.708-0.417-7.875-0.25s-2,0.333-2.5,0.5
	c-9.333,23.667-10.167,45.417-2.5,65.25c-16.833,18.167-25.25,40.167-25.25,66c0,13.333,1.167,25.542,3.5,36.625
	s5.5,20.583,9.5,28.5s8.958,15,14.875,21.25s12.083,11.333,18.5,15.25s13.667,7.292,21.75,10.125s15.75,5,23,6.5
	s15.208,2.667,23.875,3.5c-13.667,9.333-20.5,24.167-20.5,44.5v39.115c-7.549-2.247-14.99-4.902-22.3-7.994
	c-25.597-10.827-48.594-26.335-68.353-46.093c-19.758-19.759-35.267-42.757-46.093-68.354C46.679,313.195,41,285.043,41,256
	s5.679-57.195,16.879-83.675c10.827-25.597,26.335-48.594,46.093-68.353c19.758-19.759,42.756-35.267,68.353-46.093
	C198.805,46.679,226.957,41,256,41s57.195,5.679,83.675,16.879c25.599,10.827,48.595,26.335,68.354,46.093
	c19.758,19.758,35.266,42.756,46.093,68.353C465.321,198.805,471,226.957,471,256s-5.679,57.195-16.879,83.675
	C443.294,365.271,427.786,388.27,408.028,408.028z"/>
</svg>
    </a>

    <a href="mailto:chenxuan958864951@qq.com"
       class="icon" title="Email" aria-label="Email" id="email">
      <svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
<path d="M256,0C114.615,0,0,114.615,0,256s114.615,256,256,256s256-114.615,256-256S397.385,0,256,0z M128,128h256
	c4.569,0,9.002,0.981,13.072,2.831L256,295.415L114.928,130.83C118.998,128.982,123.431,128,128,128z M96,352V160
	c0-0.67,0.028-1.336,0.07-2l93.832,109.471L97.103,360.27C96.381,357.602,96,354.827,96,352z M384,384H128
	c-2.827,0-5.601-0.381-8.27-1.104l91.059-91.06L256,344.586l45.212-52.747l91.058,91.06C389.6,383.619,386.827,384,384,384z
	 M416,352c0,2.827-0.381,5.6-1.103,8.27l-92.801-92.799L415.93,158c0.042,0.664,0.07,1.33,0.07,2V352z"/>
</svg>
    </a>

    <a href="http://steamcommunity.com/id/XDfield/"
       class="icon" title="Steam Profile" aria-label="Steam Profile" id="steam">
      <svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
<path d="M151.961,418.005c13.572,0,26.893-6.567,34.986-18.708c12.867-19.301,7.651-45.377-11.649-58.244l-33.037-22.023
	c5.654-1.54,11.597-2.379,17.739-2.379c37.196,0,67.348,30.152,67.348,67.35s-30.153,67.349-67.349,67.349
	c-36.202,0-65.722-28.565-67.274-64.387l35.977,23.984C135.863,415.72,143.955,418.005,151.961,418.005z M426.67,0
	C473.608,0,512,38.406,512,85.344v341.314C512,473.626,473.608,512,426.67,512H85.344C38.406,512,0,473.625,0,426.659V325.145
	l60.667,40.444c-5.826,31.587,3.469,65.415,27.899,89.845c39.452,39.452,103.415,39.452,142.868,0
	c24.234-24.232,33.575-57.715,28.039-89.082l124.528-111.494L384,254.857c23.124-3.319,45.408-13.872,63.197-31.661
	c43.737-43.738,43.737-114.653,0-158.392c-43.74-43.739-114.654-43.739-158.393,0c-17.789,17.789-28.343,40.073-31.662,63.196l0,0
	L154.796,283.115c-15.924,0.816-31.689,5.382-45.863,13.695L0,224.189V85.344C0,38.406,38.405,0,85.343,0H426.67z M448,144
	c0-44.183-35.817-80-80-80s-80,35.817-80,80s35.817,80,80,80S448,188.183,448,144z M320,144c0-26.51,21.49-48,48-48s48,21.49,48,48
	s-21.49,48-48,48S320,170.51,320,144z"/>
</svg>
    </a>
  
  
</nav>
    <p align='center' style="font-size: 14px">
      2017-09-24 &copy; DoSun.
      <a href="/LICENSE.md">MIT License</a>
    </p>
</div>

    <main class="container">
      <header>
  <h1 class="post-title">Django新建项目</h1>
</header>
<div class="content">
  <div class="post-meta">
  <span class="post-date">13 Aug 2017</span>
  <span class="post-categories">
    
      &bull;

      
      
      

      
        <a href="/category/Django.html">
          Django
        </a>
      
    
  </span>
</div>

  <div class="post-body">
    <p>  上一篇我们搭建完了django的开发环境,现在就可以来新建个django项目来检验下了.</p>

<p>  打开Pycharm(专业版才有各种模板,<a href="#j">后面</a>会介绍没有专业版pycharm的创建方法),依次点击File-&gt;New Project,打开新建项目的页面如图:<br />
<img src="http://ows0v592v.bkt.clouddn.com/pycharm_new.png" alt="新建项目" title="Pycharm新建项目" /><br />
  左侧选择Django,右侧Location选择项目要保存的位置,Interpreter选择原先创建好的虚拟环境.</p>

<blockquote>
  <p>如果Interpteter里找不到自己的虚拟环境的话可以点击右侧的齿轮,选择”Add Local”,然后去anaconda的安装目录下的envs文件夹里找,里面有创建了的所有虚拟环境,找到装有django的那个,点击进去选择python.exe即可.</p>
</blockquote>

<p>  然后直接点Create创建项目.可以看到创建好后的项目结构如下:</p>
<blockquote>
  <ul>
    <li>mysite/
      <ul>
        <li>templates/</li>
        <li>mysite/
          <ul>
            <li>settings.py</li>
            <li>urls.py</li>
            <li>wsgi.py</li>
            <li>__init__.py</li>
          </ul>
        </li>
        <li>manage.py</li>
      </ul>
    </li>
  </ul>
</blockquote>

<p>  现在来运行下服务,点击右上角的绿色三角Run,可以看到控制台的输出如下:</p>
<blockquote>
  <p>D:\PyCharm\bin\runnerw.exe D:\Anaconda3\envs\django-learning\python.exe H:/Django/TestSite/manage.py runserver 8000
Performing system checks…</p>

  <p>System check identified no issues (0 silenced).</p>

  <p>You have 13 unapplied migration(s). Your project may not work properly until you apply the migrations for app(s): admin, auth, contenttypes, sessions.<br />
Run ‘python manage.py migrate’ to apply them.<br />
August 12, 2017 - 22:09:23<br />
Django version 1.11.4, using settings ‘TestSite.settings’<br />
Starting development server at http://127.0.0.1:8000/<br />
Quit the server with CTRL-BREAK.</p>
</blockquote>

<p>  现在打开浏览器,在地址栏上输入’http://127.0.0.1:8000’或者’http://localhost:8000’,可以看到该项目成功运行:<br />
<img src="http://ows0v592v.bkt.clouddn.com/django_run.png" alt="django成功运行" title="django项目成功运行" /></p>

<hr />
<p>  接下来配置一下mysql数据库,在使用mysql数据库之前需要启动mysql的服务,打开cmd(可能需要管理员权限),输入以下命令:<code class="highlighter-rouge">net start mysql</code>(<em>这里的mysql是你原先填的mysql的服务名</em>),成功的话可以看到’MYSQL 服务已经启动成功’的字样.(关闭服务的命令为<code class="highlighter-rouge">net stop mysql</code>)<br />
  然后打开navicat,点击连接,创建一个mysql的连接,填写:</p>
<ul>
  <li>连接名: 随意</li>
  <li>主机名: localhost</li>
  <li>端口: 3306</li>
  <li>用户名: root</li>
  <li>密码: 原先设置的密码</li>
</ul>

<p>  然后点击连接测试看成不成功(成功的话可以看到’连接成功’的提示),接着点’确定’就行了.<br />
<img src="http://ows0v592v.bkt.clouddn.com/navicat.png" alt="navicat连接" title="navicat连接测试" /><br />
  连接到数据库后,可以在右边看到该连接,右键它选择’新建数据库’:</p>
<ul>
  <li>数据库名: django_learning(任写)</li>
  <li>字符集: utf8 – UTF-8 Unicode</li>
  <li>排序规则: utf8_general_ci</li>
</ul>

<blockquote>
  <p>字符集选择utf8可以很好的支持中文,排序规则常用的选择general_ci,要记住这个里面是不区分大小写的,例如’Dog’与’dog’等同,所以不要用这种字段作为表的id,不然请选择utf8_bin</p>
</blockquote>

<hr />
<p>  创建完数据库后,就要将该数据库与django项目进行绑定了.打开项目里mysite文件夹下的settings.py文件,找到以下字段:</p>
<div class="highlighter-rouge"><pre class="highlight"><code>DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3',
        'NAME': os.path.join(BASE_DIR, 'db.sqlite3'),
    }
}
</code></pre>
</div>
<p>  这里默认的是使用python3自带的sqlite数据库,一个十分轻量级的数据库,如果不是很大的数据,对并发存储要求不高的话用这个也是可以的.现在我们将它改为使用我们创建好的mysql数据库.修改见以下:</p>
<div class="highlighter-rouge"><pre class="highlight"><code>DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql',
        'NAME': 'django_learning',
        'USER': 'root',
        'PASSWORD': '',
        'HOST': '127.0.0.1',
        'PORT': '3306',
    }
}
</code></pre>
</div>
<ul>
  <li>ENGINE: 选择mysql数据库</li>
  <li>NAME: 你创建的数据库名</li>
  <li>USER与PASSWORD按自己设定的填写(一般都是填root用户)</li>
  <li>HOST与PORT都是用的默认的</li>
</ul>

<p>  设置完后我们来检验一下能否正常使用,由于我们在上一篇已经安装了mysqlclient,所以正常来说python可以调用mysql.在该项目目录下打开cmd,输入以下命令: <code class="highlighter-rouge">python manage.py shell</code><br />
  接着输入以下代码:</p>
<div class="highlighter-rouge"><pre class="highlight"><code>from django.db import connection  
cursor = connection.cursor()  
</code></pre>
</div>
<p>  如果没有报错那说明数据库使用正常.</p>

<p>  最后初始化一下默认的数据库表.依次点击Pycharm菜单栏上的Tools-&gt;Run manage.py Task…在打开的窗口里输入 <code class="highlighter-rouge">makemigrations</code> 生成数据库变更记录,然后是 <code class="highlighter-rouge">migrate</code> 生成对应的数据表,可以用navicat等工具打开数据库查看创建好的表.</p>

<hr />
<p><span id="j"></span></p>
<h3 id="最后提一下如果没有专业版pycharm的话如何新建项目">最后提一下如果没有专业版Pycharm的话如何新建项目:</h3>
<p>  django提供了很方便的创建项目的功能,首先打开cmd,cd到想要存放项目的位置,然后输入以下命令: <code class="highlighter-rouge">django-admin startproject mysite</code> (‘mysite’可以换为任意的项目名)<br />
  可以看到创建后的项目结构和用Pycharm创建的一致:</p>
<blockquote>
  <ul>
    <li>mysite/
      <ul>
        <li>manage.py</li>
        <li>mysite/
          <ul>
            <li>__init__.py</li>
            <li>settings.py</li>
            <li>urls.py</li>
            <li>wsgi.py</li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</blockquote>

<p>  然后是不使用pycharm的话如何运行项目呢,很简单:<br />
  <code class="highlighter-rouge">python manage.py runserver</code></p>

<blockquote>
  <p>后面也可以带上自定义的参数,例如让其他电脑也可以访问网页(即使用0.0.0.0地址),或者改为自定义端口号, <code class="highlighter-rouge">python manage.py 0.0.0.0 9588</code> 即可在0.0.0.0:9588的地址开启服务.</p>
</blockquote>

<hr />
<h3 id="如何新建项目就写到这里了">如何新建项目就写到这里了~</h3>


    
  </div>

  
</div>

    </main>

    
  </body>
</html>
